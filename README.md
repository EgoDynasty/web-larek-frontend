# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Web-ларёк

## Используемый стек

Проект построен с использованием следующих технологий:

- TypeScript
- HTML
- CSS
- JavaScript (ES6+)

## Инструкция по сборке и запуску

1. Установите зависимости:
   ```sh
   npm install
   ```
2. Запустите локальный сервер:
   ```sh
   npm start
   ```

### Архитектура проекта

Проект использует архитектурный паттерн **MVP (Model-View-Presenter)**, что позволяет четко разделить код на три логических слоя:

1. **Model** – отвечает за работу с данными и их обработку.
2. **View** – отображает данные и обрабатывает действия пользователя.
3. **Presenter** – связывает Model и View, управляя их взаимодействием.

---

## Слой модели (Model)

### `Catalog`

Этот класс хранит список товаров и предоставляет методы для работы с ними.

**Поля:**
- `products: IProduct[]` – массив товаров, загружаемый из API или предустановленных данных.

**Конструктор:**

- `constructor(products: IProduct[])` – получает массив товаров и сохраняет их.

**Методы:**

- `getAllProducts(): IProduct[]` – возвращает полный список товаров.
- `addProduct(product: IProduct): void` – добавляет товар в каталог и генерирует событие о добавлении товара.
- `updateProduct(productId: string, updatedProduct: IProduct): void` – обновляет товар в каталоге и генерирует событие об обновлении товара.

### `Basket`

Отвечает за управление товарами в корзине.

**Поля:**
- `items: IProduct[]` – массив товаров, добавленных в корзину.

**Конструктор:**
- `constructor()` – создаёт пустую корзину.

**Методы:**
- `addItem(product: IProduct): void` – добавляет товар в корзину.
- `removeItem(productId: string): void` – удаляет товар по ID.
- `getItems(): IProduct[]` – возвращает список товаров в корзине.
- `clear(): void` – очищает корзину, удаляя все товары.
- `getTotalPrice(): number` – рассчитывает и возвращает общую стоимость товаров в корзине.

**Поля:**
- `items: IProduct[]` – массив товаров, добавленных в корзину.

**Конструктор:**

- `constructor()` – создаёт пустую корзину.

**Методы:**

- `addItem(product: IProduct): void` – добавляет товар в корзину.
- `removeItem(productId: string): void` – удаляет товар по ID.
- `getItems(): IProduct[]` – возвращает список товаров в корзине.

### `OrderProcessor`

Этот класс отвечает за обработку заказов и их валидацию.

**Поля:**

- `order: IOrder | null` - объект заказа

**Методы:**

- `createOrder(order: IOrder): void` – оформляет заказ и проверяет корректность данных.
- `getOrder(); IOrder | null` - возвращает текущий заказ, если он был оформлен

---

## Слой представления (View)

### `ProductView`

Отвечает за отображение каталога товаров.

**Основные элементы:**

- Контейнер для списка товаров.
- Карточки товаров.

**Методы:**

- `renderProducts(products: IProduct[]): void` – отрисовывает каталог товаров.
- `renderProductDetails(product: IProduct): void` – отображает подробную информацию о товаре.

### `BasketView`

Управляет визуальным отображением корзины.

**Основные элементы:**

- Контейнер корзины.
- Счетчик товаров и их стоимость.

**Методы:**

- `renderBasket(items: IProduct[]): void` – обновляет отображение корзины.
- `renderTotalPrice(price: number): void` – отображает общую стоимость товаров в корзине.
- `updateItemCount(count: number): void` – обновляет счетчик товаров в корзине.

### `OrderView`

Отвечает за оформление заказов.

**Основные элементы:**

- Форма заказа.
- Поля для email, телефона и адреса.
- Сообщение об успешной оплате или ошибке.

**Методы:**

- `renderOrderSuccess(order: IOrderResponse): void` – отображает сообщение об успешном заказе.
- `renderOrderError(error: string): void` – показывает ошибки при оформлении заказа.

---

## Слой презентера (Presenter)

Этот слой координирует взаимодействие между моделью и представлением.

**Основные задачи:**

- Следит за изменениями данных в модели.
- Обновляет интерфейс при изменении состояния приложения.
- Обрабатывает пользовательские действия (например, добавление товаров в корзину, оформление заказа).

---

## Описание событий

Приложение использует `EventEmitter` для управления событиями.

### Основные события:

- `product_list_loaded` – загружен список товаров, обновление каталога.
- `product_loaded` – загрузка конкретного товара, отображение в модальном окне.
- `order_created` – заказ оформлен, корзина очищена.
- `error_occurred` – возникла ошибка.
- `basket_updated` – обновление корзины (товар добавлен или удален).
- `order_status_changed` – изменение статуса заказа (например, "оплачен", "в процессе").
- `product_added` – добавлен новый товар в каталог.
- `product_updated` – обновлен товар в каталоге.

При каждом событии интерфейс обновляется, обеспечивая корректную работу приложения.


